# MCP Orchestrator PRD (Product Requirements Document)

## 1. μ ν’ κ°μ”

### 1.1 μ ν’λ…
**MCP Orchestrator** - ν”„λ΅μ νΈ μ¤‘μ‹¬ MCP μ„λ²„ ν‘μ—… ν”λ«νΌ

### 1.2 λΉ„μ „
MCP(Model Context Protocol) μƒνƒκ³„μ—μ„ **ν”„λ΅μ νΈ μ¤‘μ‹¬μ ν€ ν‘μ—…**μ„ ν†µν•΄ MCP μ„λ²„λ¥Ό ν¨μ¨μ μΌλ΅ κ΄€λ¦¬ν•κ³  κ³µμ ν•  μ μλ” ν†µν•© ν”λ«νΌ

### 1.3 ν•µμ‹¬ κ°€μΉ μ μ•
- **ν”„λ΅μ νΈ μ¤‘μ‹¬ ν‘μ—…**: ν€ κ²½κ³„λ¥Ό λ„λ‚λ“λ” μ μ—°ν• ν”„λ΅μ νΈ λ‹¨μ„ ν‘μ—…
- **λ…λ¦½μ μΈ ν”„λ΅μ νΈ ν™κ²½**: κ° ν”„λ΅μ νΈλ³„λ΅ κ²©λ¦¬λ MCP μ„λ²„ ν™κ²½ μ κ³µ
- **ν¬λ΅μ¤ν€ λ©¤λ²„μ‹­**: μ‚¬μ©μκ°€ μ—¬λ¬ ν€κ³Ό ν”„λ΅μ νΈμ— λ™μ‹ μ°Έμ—¬ κ°€λ¥
- **μ™„μ „ν• Cline νΈν™μ„±**: κΈ°μ΅΄ MCP ν΄λΌμ΄μ–ΈνΈμ™€ 100% νΈν™λλ” SSE μ—”λ“ν¬μΈνΈ
- **JWT κΈ°λ° λ³΄μ•**: μµμ‹  μΈμ¦ μ‹μ¤ν…μΌλ΅ μ•μ „ν• API μ ‘κ·Ό μ μ–΄

### 1.4 ν„μ¬ κµ¬ν„ μƒνƒ (2025λ…„ 6μ›” κΈ°μ¤€)
- β… **ν”„λ΅μ νΈ μ¤‘μ‹¬ μ•„ν‚¤ν…μ² μ™„λ£**: λ…λ¦½μ μΈ ν”„λ΅μ νΈ λ‹¨μ„ ν‘μ—… μ‹μ¤ν…
- β… **JWT ν† ν° κΈ°λ° μΈμ¦ μ™„λ£**: NextAuth.js v5 κΈ°λ° μµμ‹  μΈμ¦
- β… **ν”„λ΅μ νΈ κ΄€λ¦¬ UI μ™„λ£**: 6κ° νƒ­ (Overview, Members, Servers, Tools, Activity, Settings)
- β… **ν¬λ΅μ¤ν€ λ©¤λ²„μ‹­ μ§€μ›**: μ‚¬μ©μκ°€ μ—¬λ¬ ν€/ν”„λ΅μ νΈ μ°Έμ—¬ κ°€λ¥
- β… **μ™„μ „ν• SSE νΈν™μ„±**: Clineκ³Ό 100% νΈν™λλ” ν”„λ΅μ νΈλ³„ μ—”λ“ν¬μΈνΈ
- β… **μ„λ²„ μƒμ„Έ λ¨λ‹¬ μ™„λ£**: μ„λ²„ μΉ΄λ“ ν΄λ¦­ μ‹ μƒμ„Έ μ •λ³΄ ν‘μ‹ λ¨λ‹¬ κµ¬ν„

## 2. ν•µμ‹¬ μ•„ν‚¤ν…μ²

### 2.1 ν”„λ΅μ νΈ μ¤‘μ‹¬ κµ¬μ΅°
```
Organization (Team)
β”β”€β”€ Project A
β”‚   β”β”€β”€ Members (Cross-team)
β”‚   β”β”€β”€ MCP Servers
β”‚   β””β”€β”€ API Keys
β”β”€β”€ Project B
β””β”€β”€ Project C
```

### 2.2 URL κµ¬μ΅°
#### ν”„λ΅μ νΈλ³„ SSE μ—”λ“ν¬μΈνΈ
```
http://localhost:8000/projects/{project_id}/servers/{server_name}/sse
http://localhost:8000/projects/{project_id}/servers/{server_name}/messages
```

#### Cline μ„¤μ • μμ‹
```json
{
  "mcpServers": {
    "github-server": {
      "transport": "sse",
      "url": "http://localhost:8000/projects/550e8400-e29b-41d4-a716-446655440000/servers/github-server/sse",
      "headers": {
        "Authorization": "Bearer mcp_proj_abc123xyz..."
      }
    }
  }
}
```

## 3. ν•µμ‹¬ κΈ°λ¥

### 3.1 ν”„λ΅μ νΈ κ΄€λ¦¬ μ‹μ¤ν…
- **ν”„λ΅μ νΈ μƒλ…μ£ΌκΈ° κ΄€λ¦¬**: μƒμ„±, λ©¤λ²„ κ΄€λ¦¬, κ¶ν• κ΄€λ¦¬, μ•„μΉ΄μ΄λΈ
- **ν¬λ΅μ¤ν€ ν‘μ—…**: Team Member, Individual, External μ΄λ€ λ°©μ‹
- **κ¶ν• κ΄€λ¦¬**: Owner, Developer, Reporter 3λ‹¨κ³„ μ—­ν•  μ‹μ¤ν…

### 3.2 MCP μ„λ²„ κ΄€λ¦¬
- **ν”„λ΅μ νΈλ³„ μ„λ²„ κ²©λ¦¬**: κ° ν”„λ΅μ νΈλ§λ‹¤ λ…λ¦½λ MCP μ„λ²„ κµ¬μ„±
- **λ™μ  μ„λ²„ κ΄€λ¦¬**: ν”„λ΅μ νΈλ³„ μ„λ²„ μ„¤μ • λ° ν™κ²½ λ³€μ κ΄€λ¦¬

### 3.3 μΈμ¦ λ° λ³΄μ• μ‹μ¤ν…
- **NextAuth.js v5**: μµμ‹  Auth.js κΈ°λ° μΈμ¦ μ‹μ¤ν…
- **JWT ν† ν°**: μƒνƒ μ—†λ” ν† ν° κΈ°λ° μΈμ¦
- **ν”„λ΅μ νΈλ³„ API ν‚¤**: ν”„λ΅μ νΈλ³„ λ…λ¦½ API ν‚¤ λ°κΈ‰

### 3.4 μ›Ή κΈ°λ° κ΄€λ¦¬ λ€μ‹λ³΄λ“
- **ν”„λ΅μ νΈ μƒμ„Έ νμ΄μ§€**: 6κ° νƒ­ (Overview, Members, Servers, Tools, Activity, Settings)
- **μ΄μ¤‘ λ„¤λΉ„κ²μ΄μ… κµ¬μ΅°**: Teams λ©”λ‰΄ + My Projects λ©”λ‰΄

## 4. κΈ°μ  μ¤νƒ

### 4.1 Backend
- **μ–Έμ–΄**: Python 3.11+, **ν¨ν‚¤μ§€ κ΄€λ¦¬**: uv
- **ν”„λ μ„μ›ν¬**: FastAPI, **λ°μ΄ν„°λ² μ΄μ¤**: PostgreSQL + SQLAlchemy
- **μΈμ¦**: JWT ν† ν° κ²€μ¦, NextAuth.js ν† ν° νΈν™

### 4.2 Frontend
- **ν”„λ μ„μ›ν¬**: Next.js 14 (App Router), **ν¨ν‚¤μ§€ κ΄€λ¦¬**: pnpm
- **UI λΌμ΄λΈλ¬λ¦¬**: shadcn/ui + Tailwind CSS
- **μƒνƒ κ΄€λ¦¬**: Zustand, **μΈμ¦**: NextAuth.js v5

### 4.3 ν”„λ΅ν† μ½ μ§€μ›
- **SSE**: Cline νΈν™ μ‹¤μ‹κ°„ ν†µμ‹ 
- **REST API**: μ›Ή UI λ° κ΄€λ¦¬ μΈν„°νμ΄μ¤
- **JSON-RPC 2.0**: MCP ν‘μ¤€ ν”„λ΅ν† μ½

## 5. API μ„¤κ³„

### 5.1 ν”„λ΅μ νΈ κ΄€λ¦¬ API
```python
# ν”„λ΅μ νΈ CRUD
GET    /api/projects                    # μ‚¬μ©μ μ°Έμ—¬ ν”„λ΅μ νΈ λ©λ΅
POST   /api/projects                    # μƒ ν”„λ΅μ νΈ μƒμ„±  
GET    /api/projects/{project_id}       # ν”„λ΅μ νΈ μƒμ„Έ μ •λ³΄
PUT    /api/projects/{project_id}       # ν”„λ΅μ νΈ μ •λ³΄ μμ •
DELETE /api/projects/{project_id}       # ν”„λ΅μ νΈ μ‚­μ 

# ν”„λ΅μ νΈ λ©¤λ²„ κ΄€λ¦¬
GET    /api/projects/{project_id}/members           # λ©¤λ²„ λ©λ΅
POST   /api/projects/{project_id}/members           # λ©¤λ²„ μ¶”κ°€
PUT    /api/projects/{project_id}/members/{user_id} # λ©¤λ²„ μ—­ν•  λ³€κ²½
DELETE /api/projects/{project_id}/members/{user_id} # λ©¤λ²„ μ κ±°

# ν”„λ΅μ νΈ μ„λ²„ κ΄€λ¦¬
GET    /api/projects/{project_id}/servers    # μ„λ²„ λ©λ΅
POST   /api/projects/{project_id}/servers    # μ„λ²„ μ¶”κ°€
PUT    /api/projects/{project_id}/servers    # μ„λ²„ μ„¤μ • μμ •
DELETE /api/projects/{project_id}/servers    # μ„λ²„ μ κ±°
```

### 5.2 ν”„λ΅μ νΈλ³„ SSE μ—”λ“ν¬μΈνΈ
```python
# ν”„λ΅μ νΈλ³„ MCP μ„λ²„ SSE μ—”λ“ν¬μΈνΈ
GET /projects/{project_id}/servers/{server_name}/sse      # SSE μ—°κ²°
POST /projects/{project_id}/servers/{server_name}/messages # λ©”μ‹μ§€ μ „μ†΅

# ν”„λ΅μ νΈ λ¦¬μ†μ¤ κ΄€λ¦¬
GET /projects/{project_id}/api-keys              # API ν‚¤ λ©λ΅
POST /projects/{project_id}/api-keys             # API ν‚¤ μƒμ„±
GET /projects/{project_id}/cline-config          # Cline μ„¤μ • μλ™ μƒμ„±
GET /projects/{project_id}/.well-known/mcp-servers # Discovery μ—”λ“ν¬μΈνΈ
```

## 6. κµ¬ν„ λ΅λ“λ§µ

### Phase 1: ν”„λ΅μ νΈ μ¤‘μ‹¬ MVP β… μ™„λ£ (2025λ…„ 6μ›”)
- [x] ν”„λ΅μ νΈ μ¤‘μ‹¬ λ°μ΄ν„°λ² μ΄μ¤ λ¨λΈ μ„¤κ³„
- [x] ν”„λ΅μ νΈ κ΄€λ¦¬ API κµ¬ν„ (CRUD)
- [x] ν”„λ΅μ νΈλ³„ SSE μ—”λ“ν¬μΈνΈ κµ¬ν„
- [x] ν”„λ΅ νΈμ—”λ“ ν”„λ΅μ νΈ κ΄€λ¦¬ UI μ™„λ£
- [x] JWT κΈ°λ° μΈμ¦ μ‹μ¤ν… κµ¬ν„
- [x] NextAuth.js v5 μ—…κ·Έλ μ΄λ“ μ™„λ£
- [x] λ©¤λ²„ λ°μ΄ν„° ν‘μ‹ μ¤λ¥ μμ • μ™„λ£

### Phase 2: ν”„λ΅μ νΈ μ¤‘μ‹¬ μ•„ν‚¤ν…μ² κ°•ν™” π”¥ (μ§„ν–‰ μ¤‘)
- [ ] ν”„λ΅μ νΈ μ„λ²„ μΉ΄λ“ ν΄λ¦­ λΌμ°ν… μμ •
- [ ] μ„λ²„ μ¤ν† μ–΄ ν”„λ΅μ νΈ μ§€μ› ν™•μ¥
- [ ] μ „μ—­ μ„λ²„ κ΄€λ¦¬ κ¶ν• μ ν•
- [ ] λ„¤λΉ„κ²μ΄μ… κµ¬μ΅° μ •λ¦¬

### Phase 3: κ³ κΈ‰ ν”„λ΅μ νΈ κΈ°λ¥ (2-3μ£Ό)
- [ ] ν”„λ΅μ νΈ ν…ν”λ¦Ώ μ‹μ¤ν…
- [ ] ν”„λ΅μ νΈ μ•„μΉ΄μ΄λΈ λ° λ³µκµ¬
- [ ] κ³ κΈ‰ λ©¤λ²„ κ΄€λ¦¬

### Phase 4: μλ™ν™” λ° μ§€λ¥ν™” (3-4μ£Ό)
- [ ] ν”„λ΅μ νΈ μλ™ν™”
- [ ] μ§€λ¥ν• μ¶”μ² μ‹μ¤ν…
- [ ] λ°°μΉ μ²λ¦¬ λ¨λ“

### Phase 5: μ—”ν„°ν”„λΌμ΄μ¦ ν™•μ¥ (4-6μ£Ό)
- [ ] SSO ν†µν•©
- [ ] κ³ κΈ‰ λ¨λ‹ν„°λ§
- [ ] API ν™•μ¥μ„±

## 7. μ„±κ³µ μ§€ν‘

### 7.1 μ‚¬μ©μ„± μ§€ν‘
- **ν”„λ΅μ νΈ μƒμ„± μ‹κ°„**: ν‰κ·  2λ¶„ μ΄λ‚΄ μ™„λ£
- **λ©¤λ²„ μ΄λ€ μ„±κ³µλ¥ **: 95% μ΄μƒ
- **SSE μ—°κ²° μ•μ •μ„±**: 99.9% μ΄μƒ

### 7.2 μ„±λ¥ μ§€ν‘
- **API μ‘λ‹µ μ‹κ°„**: 95% μ”μ²­μ΄ 200ms μ΄λ‚΄
- **λ™μ‹ μ‚¬μ©μ**: 1000λ… μ΄μƒ μ§€μ›
- **ν”„λ΅μ νΈ κ·λ¨**: ν”„λ΅μ νΈλ‹Ή 100κ° μ΄μƒ MCP μ„λ²„ μ§€μ›

## 8. λ³΄μ• λ° μ»΄ν”λΌμ΄μ–Έμ¤

### 8.1 λ°μ΄ν„° λ³΄μ•
- **ν”„λ΅μ νΈ κ²©λ¦¬**: ν”„λ΅μ νΈλ³„ μ™„μ „ν• λ°μ΄ν„° κ²©λ¦¬
- **API ν‚¤ μ•”νΈν™”**: μ €μ¥ μ‹ AES-256 μ•”νΈν™”
- **κ°μ‚¬ λ΅κ·Έ**: λ¨λ“  μ¤‘μ” μ‘μ—…μ— λ€ν• μ™„μ „ν• κ°μ‚¬ μ¶”μ 

## 9. κ²°λ΅ 

MCP Orchestratorλ” **ν”„λ΅μ νΈ μ¤‘μ‹¬μ μ μ—°ν• ν‘μ—… ν”λ«νΌ**μΌλ΅ μ§„ν™”ν–μµλ‹λ‹¤.

### 9.1 ν•µμ‹¬ μ°¨λ³„ν™” μ”μ†
1. **ν”„λ΅μ νΈ μ¤‘μ‹¬ μ•„ν‚¤ν…μ²**: ν€ κ²½κ³„λ¥Ό λ„λ‚λ“λ” μ μ—°ν• ν‘μ—… κµ¬μ΅°
2. **ν¬λ΅μ¤ν€ λ©¤λ²„μ‹­**: μ‚¬μ©μκ°€ μ—¬λ¬ ν€κ³Ό ν”„λ΅μ νΈμ— λ™μ‹ μ°Έμ—¬
3. **μ™„μ „ν• MCP νΈν™μ„±**: κΈ°μ΅΄ Cline λ“± MCP ν΄λΌμ΄μ–ΈνΈμ™€ 100% νΈν™
4. **μµμ‹  μΈμ¦ μ‹μ¤ν…**: NextAuth.js v5 κΈ°λ° JWT ν† ν° μΈμ¦
5. **λ…λ¦½μ μΈ ν”„λ΅μ νΈ ν™κ²½**: κ° ν”„λ΅μ νΈλ³„ κ²©λ¦¬λ MCP μ„λ²„ κ΄€λ¦¬

### 9.2 ν–¥ν›„ λΉ„μ „
MCP Orchestratorλ” λ‹¨μν• MCP μ„λ²„ κ΄€λ¦¬ λ„κµ¬λ¥Ό λ„μ–΄μ„, **AI ν‘μ—…μ μƒλ΅μ΄ ν¨λ¬λ‹¤μ„**μ„ μ μ‹ν•λ” ν”λ«νΌμΌλ΅ λ°μ „ν•  κ²ƒμ…λ‹λ‹¤.
